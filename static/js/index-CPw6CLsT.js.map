{"version":3,"file":"index-CPw6CLsT.js","sources":["../../../src/utils/map.ts","../../../src/views/gdMap/index.vue"],"sourcesContent":["//地图实例统一获取\r\nconst windowThis: any = window\r\nexport function MapLoader(plugins:string[]) {\r\n    return new Promise((resolve, reject) => {\r\n        windowThis.AMapLoader.load({\r\n            key: 'ccfb8792461dd4bd62ec9b56c4915d63',\r\n            plugins, //申请好的Web端开发者 Key，调用 load 时必填\r\n            // version: '2.0', //指定要加载的 JS API 的版本，缺省时默认为 1.4.15\r\n        })\r\n            .then((AMap: any) => {\r\n                // const map = new AMap.Map('container')\r\n                resolve(AMap)\r\n            })\r\n            .catch((e: any) => {\r\n                console.error(e) //加载错误提示\r\n            })\r\n    })\r\n}\r\n","<template>\r\n    <div style=\"padding: 20px;width: 100%;height: 100%\">\r\n        <div id=\"container\" style=\"width: 100%;height: 100%\">\r\n        </div>\r\n    </div>\r\n</template>\r\n<script lang=\"ts\" setup>\r\nimport { MapLoader } from '@/utils/map'\r\nimport { ref, onMounted, onUnmounted } from 'vue'\r\n\r\nlet Map: any = null\r\n//初始化 用于外部调用new mapNew 等同于地图中的 new map\r\nlet mapNew: any = null\r\n// 缩放栏实例\r\n//marker 实例\r\nconst marker = ref<any>(null)\r\n// 缩放栏展示隐藏\r\n// const showToolType = ref(false)\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nonMounted(() => {\r\n    // https://lbs.amap.com/demo/javascript-api-v2/example/marker/custom-icon  官网示例 api\r\n    MapLoader(['AMap.Geolocation', 'AMap.Scale', 'AMap.ToolBar']).then((AMap: any) => {\r\n        //地图初始化\r\n        mapNew = AMap  // mapNew 用于外部实例化\r\n        console.log(mapNew, 'mapNew')\r\n        ///==========================\r\n        Map = new AMap.Map(\"container\", {\r\n            zoom: 14,  //初始化缩放比例\r\n            center: [121.472644, 31.231706]  //默认中心点\r\n        });\r\n        //添加缩放栏\r\n        let toolbar = new AMap.ToolBar({\r\n            visible: true,\r\n        });\r\n        Map.addControl(toolbar);\r\n        //为地图点标记 Marker\r\n        marker.value = new AMap.Marker({\r\n            position: [121.472644, 31.231706], //位置\r\n        });\r\n\r\n        marker.value.setMap(Map);\r\n\r\n        // Map.add(marker.value);\r\n\r\n    })\r\n})\r\n//销毁\r\nonUnmounted(() => {\r\n    Map?.destroy();\r\n});\r\n</script>\r\n\r\n<style scoped></style>"],"names":["windowThis","window","Map","mapNew","marker","Vue","onMounted","plugins","Promise","resolve","reject","AMapLoader","load","key","then","AMap","catch","e","console","error","log","zoom","center","toolbar","ToolBar","visible","addControl","value","Marker","position","setMap","onUnmounted","destroy"],"mappings":"AACA,MAAMA,EAAkBC,gNCSxB,IAAAC,EAAA,KAEAC,EAAA,KAGA,MAAAC,EAAeC,qBAUfA,IAAAC,WAAA,KDvBO,IAAmBC,KCyBtB,CAAA,mBAAA,aAAA,gBDxBO,IAAIC,SAAQ,CAACC,EAASC,KACzBV,EAAWW,WAAWC,KAAK,CACvBC,IAAK,mCACLN,YAGCO,MAAMC,IAEHN,EAAQM,EAAI,IAEfC,OAAOC,IACJC,QAAQC,MAAMF,EAAC,GAClB,KCYTH,MAAAC,IAEIZ,EAAAY,EACAG,QAAAE,IAAAjB,EAAA,UAEAD,EAAA,IAAAa,EAAAb,IAAA,YAAA,CAAgCmB,KAAA,GACtBC,OAAA,CAAA,WAAA,aAIV,IAAAC,EAAA,IAAAR,EAAAS,QAAA,CAA+BC,SAAA,IAG/BvB,EAAAwB,WAAAH,GAEAnB,EAAAuB,MAAA,IAAAZ,EAAAa,OAAA,CAA+BC,SAAA,CAAA,WAAA,aAI/BzB,EAAAuB,MAAAG,OAAA5B,EAAA,GAAuB,IAO/BG,IAAA0B,aAAA,KACI,MAAA7B,GAAAA,EAAA8B,SAAA"}