import{u as e,r as o}from"./index-DI-3peFy.js";const s=axios.create({baseURL:"https://api-production.example.com",timeout:5e3});s.interceptors.request.use((o=>{const{user:s}=e();return console.log("===================================="),console.log(s.getToken),console.log("===================================="),s.getToken&&(o.headers.Authorization=`Bearer ${s.getToken}`,console.log(o,"config")),o}),(e=>Promise.reject(e))),s.interceptors.response.use((async e=>{const{success:o,message:s,data:t}=e.data;return o?Promise.resolve(t):(ElementPlus.ElMessage.error(s),Promise.reject(new Error(s)))}),(s=>{const{user:t}=e();return s.response&&s.response.data&&401===s.response.data.code&&(t.outLogin(),o.replace("/login")),ElementPlus.ElMessage.error(s.message),Promise.reject(s)}));const t=Vue.defineComponent({__name:"index",setup(e){const{proxy:o}=Vue.getCurrentInstance(),t=()=>{s.get("/sss").then((e=>{}))},r=()=>{console.log(o),o.$ShowMessage({message:"消息",ok:()=>{console.log("确定干啥")},cancel:()=>{console.log("取消要干什么")}})};return(e,o)=>{const s=Vue.resolveComponent("el-button"),n=Vue.resolveDirective("domDirective");return Vue.openBlock(),Vue.createElementBlock("div",null,[Vue.withDirectives((Vue.openBlock(),Vue.createBlock(s,{onClick:t},{default:Vue.withCtx((()=>[Vue.createTextVNode("axios调用")])),_:1})),[[n,["login"]]]),Vue.createVNode(s,{onClick:r},{default:Vue.withCtx((()=>[Vue.createTextVNode("函数式组件")])),_:1})])}}});export{t as default};
//# sourceMappingURL=index-DEGjQ71j.js.map
